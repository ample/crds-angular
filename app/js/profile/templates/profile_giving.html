<h2>Giving History</h2>
<h3 class="subheading">Your history of financial giving to crossroads.</h3>
<br>

<p><strong>Statements Sent To:</strong></p>
<address>
  {{address.addressLine1}}<br>
  <span ng-show="address.addressLine2">{{address.addressLine2}}<br></span>
  {{address.city}} {{address.state__Region}}, {{address.postalCode}}<br>
</address>
<br>
<div ng-init="giving=[]; giving.total = 0">
<form class="form-inline" role="form">
  <div class="form-group">
    <label for="dateFilter" class="control-label">Year</label>
    <select class="form-control" id="dateFilter" ng-change="giving.total = 0" ng-model="dateFilter" ng-options="year for year in years">
      <option value="">All</option>
    </select>
  </div>
</form>
<br>
<table class="table table-striped table-responsive">
  <thead>
    <tr>
      <th>Date</th>
      <th>Amount</th>
      <th>Fund</th>
      <th>Type</th>
    </tr>
  </thead>
  <tr ng-repeat="givingRecord in givingHistory | DateYearFilter:dateFilter:'donationDate'">
    <td>{{givingRecord.donationDate | date:"MM/dd/yyyy"}}</td>
    <td ng-init="giving.total = giving.total + givingRecord.amount">{{givingRecord.amount | currency:"$"}}</td>
    <td>{{givingRecord.statementTitle}}</td>
    <td>{{givingRecord.paymentType}}</td>
  </tr>
</table>
<h4>Total: {{giving.total | currency:"$"}}</h4>
<br>
</div>

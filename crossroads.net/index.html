<!DOCTYPE html>
<html lang="en" ng-app="crossroads">
  <head>
    <base href="/"></base>
    <style>
      /* Allow angular.js to be loaded in body, hiding cloaked elements until
       * templates compile.  The !important is important given that there may be
       * other selectors that are more specific or come later and might alter display.
       */
        [ng\:cloak],
        [ng-cloak],
        .ng-cloak {
            display: none !important;
        }
    </style>
    <title>Index</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <ng-include src="'app/templates/favicons.html'"> </ng-include>
    <link href="assets/main.css" rel="stylesheet" />
    <script type="text/ng-template" id="on-submit-messages">
        <span ng-message="required"><span ng-bind-html="$root.messages[$root.MESSAGES.fieldCanNotBeBlank].message | html"></span></span>
        <span ng-message="initiativeRequired"><span ng-bind-html="$root.messages[$root.MESSAGES.noInitiativeSelected].message | html"></span></span>
    </script>
    <script type="text/ng-template" id="on-pause-messages">
        <span ng-message="pattern"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidData].message | html"></span></span>
        <span ng-message="invalidDate"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidData].message | html"></span></span>
        <span ng-message="email"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidEmail].message | html"></span></span>
    </script>
    <script type="text/ng-template" id="on-blur-messages">
        <span ng-message="minlength"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidPassword].message | html"></span></span>
        <span ng-message="unique"><span ng-bind-html="$root.messages[$root.MESSAGES.emailInUse].message | html"></span></span>
        <span ng-message="email"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidEmail].message | html"></span></span>
        <span ng-message="invalidRouting"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidRoutingTransit].message | html"></span></span>
        <span ng-message="invalidAccount"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidAccountNumber].message | html"></span></span>
        <span ng-message="naturalNumber"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidDonationAmount].message | html"></span></span>
        <span ng-message="invalidZip"><span ng-bind-html="$root.messages[$root.MESSAGES.invalidZip].message | html"></span></span>
    </script>
    <ng-include src="'assets/cr.svg'"></ng-include>
</head>

<body ng-controller="appController as app" ng-class="app.asideState.position">
        <div growl class="crossroads-growl"></div>
        <div>
            <header ng-if="!app.state.current.data.hideMenu">
                <div class="overlay-container"></div>
                <!-- Brand Bar -->
                <ng-include src="'app/templates/brand-bar.html'"></ng-include>
                <div id="menu">
                    <div class="container">
                        <div class="row">
                            <!-- TODO refactor this out into it's own directive, that uses the login and registration directives. The new directive should take an argument that is the internal directive (login and/or registration)* -->
                            <div class="col-xs-12 menu__container hidden-print">
                                <div class="navbar-header">
                                    <div ng-class="{show: menu.isMobileShowing}">
                                        <button type="button" class="nav__side--toggle navbar-left hidden-md hidden-lg hidden-xl" ng-click="app.openAside('left', true)">
                                            <span class="sr-only">Toggle navigation</span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                            <span class="icon-bar"></span>
                                        </button>
                                    </div>
                                    <a class="navbar-brand logo" href="/"><img src="//crossroads-media.s3.amazonaws.com/images/logo.svg" alt="crossroads">
                                    </a>
                                    <ul class="navbar--login list-unstyled">
                                        <span id="current-user" class="hidden-xs" ng-if="$root.username != undefined" ng-cloak> {{$root.username}} </span>
                                        <li class="hidden-xs ng-cloak" ng-show="$root.username != undefined" ng-cloak>
                                            <a href="#/home" ng-click="logout()" class="ng-cloak">Sign Out</a>
                                        </li>
                                        <li class="hidden-xs" data-toggle="dropdown" ng-show="$root.username == undefined">
                                            <button class="btn btn-primary" id="form-toggle" ng-click="toggleDesktopLogin(); passwordPrefix='login-dropdown'">
                                                <span>Login</span>
                                            </button>
                                        </li>

                                        <li>
                                            <ul class="navbar--login__dropdown list-unstyled col-md-3 soft-top soft-sides" role="menu" aria-labelledby="dropdownMenu1" ng-class="{toggleOpen: loginShow}">
                                                <li role="presentation">
                                                    <div class="navbar--register__container">
                                                        <div class="dd_menu">

                                                            <login-form></login-form>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                    <ul class="navbar--login list-unstyled">
                                        <li class="hidden-xs" data-toggle="dropdown" ng-show="$root.username == undefined">
                                            <button class="btn btn-primary" id="form-toggle" ng-click="toggleDesktopRegister(); passwordPrefix='registration'">
                                                <span>Register</span>
                                            </button>
                                        </li>

                                        <li>
                                            <ul class="navbar--login__dropdown list-unstyled col-md-3 soft-top soft-sides" role="menu" aria-labelledby="dropdownMenu2" ng-class="{toggleOpen: registerShow}">
                                                <li role="presentation">
                                                    <div class="navbar--register__container">
                                                        <div class="dd_menu">
                                                            <register-form></register-form>
                                                        </div>
                                                    </div>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                                <ng-include src="'templates/nav.html'"> </ng-include>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                          <preloader ng-if="app.resolving" full-screen='true'> </preloader>
                          <div ui-view ng-if="!app.resolving"></div>
                        </div>
                    </div>
                </div>
        </div>

        <ng-include src="'app/templates/footer.html'"></ng-include>

    </div>
</body>
<script src="https://js.stripe.com/v2/"></script>
<script src="assets/main.js"></script>
</html>
